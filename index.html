<!DOCTYPE html>
<html lang="uz" data-theme="light">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>TestPro ‚Äî Professional Test Platformasi</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Unbounded:wght@700;800;900&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth;-webkit-tap-highlight-color:transparent}
body{font-family:'Plus Jakarta Sans',sans-serif;min-height:100vh;
  background:linear-gradient(135deg,#f5f3ff 0%,#fce7f3 50%,#eff6ff 100%);
  color:#1a1a2e;overflow-x:hidden}
[data-theme="dark"] body{background:linear-gradient(135deg,#0d0820,#140a20,#080d1a);color:#e8e0ff}
a{text-decoration:none;color:inherit}
.nav{position:fixed;top:0;left:0;right:0;height:58px;z-index:500;
  display:flex;align-items:center;justify-content:space-between;padding:0 1.25rem;
  background:rgba(245,243,255,.92);backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(124,58,237,.1)}
[data-theme="dark"] .nav{background:rgba(13,8,32,.92);border-color:rgba(124,58,237,.2)}
.logo{font-family:'Unbounded',sans-serif;font-size:1.2rem;font-weight:900;cursor:pointer;
  background:linear-gradient(135deg,#7c3aed,#ec4899);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.nav-r{display:flex;align-items:center;gap:.45rem}
.tbtn{width:32px;height:32px;border-radius:8px;border:1.5px solid rgba(0,0,0,.1);
  background:#fff;cursor:pointer;font-size:.85rem;transition:all .2s}
[data-theme="dark"] .tbtn{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15)}
.nbtn{padding:.42rem .9rem;border-radius:9px;font-size:.8rem;font-weight:700;
  cursor:pointer;border:none;font-family:'Plus Jakarta Sans',sans-serif;transition:all .2s}
.nbtn-g{background:transparent;border:1.5px solid rgba(0,0,0,.1);color:#374151}
[data-theme="dark"] .nbtn-g{border-color:rgba(255,255,255,.15);color:#c4b5fd}
.nbtn-g:hover{border-color:#7c3aed;color:#7c3aed}
.nbtn-p{background:linear-gradient(135deg,#7c3aed,#ec4899);color:#fff}
.nbtn-p:hover{transform:translateY(-1px);box-shadow:0 5px 16px rgba(124,58,237,.32)}
.hero{min-height:100vh;display:flex;align-items:center;justify-content:center;
  text-align:center;padding:80px 1.25rem 3rem}
.badge{display:inline-flex;align-items:center;gap:.45rem;padding:.35rem 1rem;
  background:rgba(124,58,237,.08);border:1px solid rgba(124,58,237,.2);
  border-radius:99px;font-size:.74rem;font-weight:700;color:#7c3aed;margin-bottom:1.5rem}
.dot{width:7px;height:7px;background:#10b981;border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.hero-h{font-family:'Unbounded',sans-serif;font-size:clamp(1.9rem,7vw,3.4rem);
  font-weight:900;line-height:1.08;margin-bottom:1rem}
.hero-h span{background:linear-gradient(135deg,#7c3aed,#ec4899);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-p{font-size:clamp(.88rem,2.5vw,1.05rem);color:#6b7280;max-width:500px;
  margin:0 auto 2rem;line-height:1.65}
[data-theme="dark"] .hero-p{color:#9ca3af}
.hero-btns{display:flex;gap:.75rem;justify-content:center;flex-wrap:wrap}
.hbtn{padding:.8rem 1.8rem;border-radius:13px;font-size:.9rem;font-weight:700;
  cursor:pointer;border:none;font-family:'Plus Jakarta Sans',sans-serif;transition:all .22s}
.hbtn-p{background:linear-gradient(135deg,#7c3aed,#ec4899);color:#fff}
.hbtn-p:hover{transform:translateY(-3px);box-shadow:0 10px 28px rgba(124,58,237,.35)}
.hbtn-s{background:#fff;color:#374151;border:1.5px solid rgba(0,0,0,.1)}
[data-theme="dark"] .hbtn-s{background:rgba(255,255,255,.08);color:#e5e7eb;border-color:rgba(255,255,255,.15)}
.hbtn-s:hover{border-color:#7c3aed;color:#7c3aed}
.stats{display:flex;justify-content:center;gap:2.5rem;flex-wrap:wrap;margin-top:3rem}
.sv{font-family:'Unbounded',sans-serif;font-size:2rem;font-weight:900;
  background:linear-gradient(135deg,#7c3aed,#ec4899);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.sl{font-size:.7rem;color:#9ca3af;text-transform:uppercase;letter-spacing:.08em;font-weight:700}
.section{padding:3rem 1.25rem;max-width:860px;margin:0 auto}
.sec-h{font-family:'Unbounded',sans-serif;font-size:1.3rem;font-weight:900;
  text-align:center;margin-bottom:1.5rem}
.grp{margin-bottom:1.25rem}
.grp-hdr{display:flex;align-items:center;margin-bottom:.55rem;gap:.4rem}
.grp-label{font-size:.8rem;font-weight:800;display:flex;align-items:center;gap:.38rem}
.cnt{font-size:.63rem;background:rgba(124,58,237,.1);color:#7c3aed;border-radius:99px;padding:.1rem .42rem;font-weight:700}
.swipe-out{overflow:hidden;border-radius:12px}
.rail{display:flex;transition:transform .3s cubic-bezier(.16,1,.3,1)}
.sc{min-width:100%;background:#fff;border:1.5px solid rgba(0,0,0,.07);border-radius:12px;padding:.9rem;flex-shrink:0}
[data-theme="dark"] .sc{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.1)}
.ti-nm{font-size:.88rem;font-weight:700;color:#111827;margin-bottom:.12rem}
[data-theme="dark"] .ti-nm{color:#e5e7eb}
.ti-au{font-size:.7rem;color:#9ca3af;margin-bottom:.38rem}
.chips{display:flex;gap:.35rem;flex-wrap:wrap;margin-bottom:.55rem}
.chip{display:inline-flex;align-items:center;padding:.15rem .45rem;border-radius:99px;
  font-size:.67rem;font-weight:600;background:rgba(124,58,237,.08);color:#7c3aed;border:1px solid rgba(124,58,237,.15)}
.gbtn{width:100%;padding:.62rem;border-radius:10px;border:none;cursor:pointer;
  background:linear-gradient(135deg,#7c3aed,#ec4899);color:#fff;
  font-family:'Plus Jakarta Sans',sans-serif;font-size:.82rem;font-weight:700;transition:all .2s}
.gbtn:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(124,58,237,.3)}
.swipe-btm{display:flex;align-items:center;justify-content:space-between;margin-top:.5rem}
.dots-w{display:flex;gap:4px}
.d{width:6px;height:6px;border-radius:50%;background:rgba(124,58,237,.2);cursor:pointer;transition:all .2s}
.d.on{background:#7c3aed;width:14px;border-radius:99px}
.arrs{display:flex;gap:.3rem}
.ar{width:26px;height:26px;border-radius:50%;border:1px solid rgba(124,58,237,.22);
  background:rgba(124,58,237,.07);color:#7c3aed;cursor:pointer;font-size:.8rem;
  display:flex;align-items:center;justify-content:center;transition:all .2s}
.ar:hover:not(:disabled){background:rgba(124,58,237,.18)}
.ar:disabled{opacity:.28;cursor:default}
.cta{background:linear-gradient(135deg,#7c3aed,#ec4899);border-radius:20px;
  padding:2.5rem 1.5rem;text-align:center;margin:0 1.25rem 3rem}
.cta-h{font-family:'Unbounded',sans-serif;font-size:1.3rem;font-weight:900;color:#fff;margin-bottom:.6rem}
.cta-p{font-size:.85rem;color:rgba(255,255,255,.8);margin-bottom:1.25rem}
.cta-btn{padding:.75rem 2rem;border-radius:12px;border:none;cursor:pointer;
  background:#fff;color:#7c3aed;font-weight:800;font-size:.9rem;font-family:'Plus Jakarta Sans',sans-serif;transition:all .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.2)}
footer{text-align:center;padding:2rem 1rem;font-size:.77rem;color:#9ca3af;
  border-top:1px solid rgba(0,0,0,.07)}
[data-theme="dark"] footer{border-color:rgba(255,255,255,.07)}
.sp{width:24px;height:24px;border:2.5px solid rgba(124,58,237,.2);
  border-top-color:#7c3aed;border-radius:50%;animation:spin .7s linear infinite;margin:1.5rem auto}
@keyframes spin{to{transform:rotate(360deg)}}
.emp{text-align:center;padding:1.5rem;color:#9ca3af;font-size:.82rem}
</style>
</head>
<body>

<nav class="nav">
  <div class="logo" onclick="goTo('index.html')">TestPro</div>
  <div class="nav-r">
    <button class="tbtn" id="tbtn">üåô</button>
    <button class="nbtn nbtn-g" onclick="goTo('dashboard.html')">Dashboard</button>
    <button class="nbtn nbtn-p" onclick="goTo('login.html')">Kirish</button>
  </div>
</nav>

<section class="hero">
  <div>
    <div class="badge"><div class="dot"></div> Professional Test Platform</div>
    <h1 class="hero-h">O'rganish endi<br/><span>ancha oson</span></h1>
    <p class="hero-p">Fan bo'yicha guruhlangan testlar. Izohli savollar. Tahliliy natijalar. Bepul va professional platforma.</p>
    <div class="hero-btns">
      <button class="hbtn hbtn-p" onclick="goTo('login.html')">Bepul boshlash ‚Üí</button>
      <button class="hbtn hbtn-s" onclick="document.getElementById('tests').scrollIntoView({behavior:'smooth'})">Testlarni ko'rish</button>
    </div>
    <div class="stats">
      <div><div class="sv">10K+</div><div class="sl">Foydalanuvchi</div></div>
      <div><div class="sv">50K+</div><div class="sl">Testlar</div></div>
      <div><div class="sv">98%</div><div class="sl">Mamnun</div></div>
    </div>
  </div>
</section>

<section class="section" id="tests">
  <h2 class="sec-h">üåê Ommaviy testlar</h2>
  <div id="tw"><div class="sp"></div></div>
</section>

<div style="max-width:600px;margin:0 auto">
  <div class="cta">
    <div class="cta-h">O'z testingizni yarating!</div>
    <p class="cta-p">Bir necha daqiqada professional test yarating va do'stlaringiz bilan ulashing.</p>
    <button class="cta-btn" onclick="goTo('login.html')">Hoziroq boshlash ‚Üí</button>
  </div>
</div>

<footer>
  <div style="font-family:'Unbounded',sans-serif;font-size:.95rem;font-weight:900;margin-bottom:.3rem;
    background:linear-gradient(135deg,#7c3aed,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">
    TestPro</div>
  ¬© 2025 TestPro. Barcha huquqlar himoyalangan.
</footer>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="js/firebase.js"></script>
<script>
const T={get(){return localStorage.getItem('tp_theme')||(matchMedia('(prefers-color-scheme:dark)').matches?'dark':'light')},
  set(t){document.documentElement.setAttribute('data-theme',t);localStorage.setItem('tp_theme',t);
    document.getElementById('tbtn').textContent=t==='dark'?'‚òÄÔ∏è':'üåô'},
  toggle(){this.set(this.get()==='dark'?'light':'dark')}};
T.set(T.get());
document.getElementById('tbtn').onclick=()=>T.toggle();

(async()=>{
  const wrap=document.getElementById('tw');
  try{
    const tests=(await DB.getPublicTests()).filter(t=>t.visibility==='public');
    if(!tests.length){wrap.innerHTML='<div class="emp">Hali ommaviy test yo\'q</div>';return;}
    const groups={};
    tests.forEach(t=>{const k=t.subject||'other';if(!groups[k])groups[k]=[];groups[k].push(t);});
    wrap.innerHTML='';
    Object.entries(groups).forEach(([subj,arr])=>{
      const sub=getSubject(subj);
      const grp=document.createElement('div');grp.className='grp';
      const hdr=document.createElement('div');hdr.className='grp-hdr';
      hdr.innerHTML=`<div class="grp-label">${sub.emoji} ${esc(sub.label)} <span class="cnt">${arr.length}</span></div>`;
      grp.appendChild(hdr);
      const outer=document.createElement('div');outer.className='swipe-out';
      const rail=document.createElement('div');rail.className='rail';
      let cur=0;
      arr.forEach(t=>{
        const c=document.createElement('div');c.className='sc';
        c.innerHTML=`<div class="ti-nm">${esc(t.title)}</div>
          <div class="ti-au">${esc(t.authorName||'Anonim')}</div>
          <div class="chips">
            <span class="chip">üìù ${t.questionCount||0} savol</span>
            <span class="chip">üëÅÔ∏è ${t.attempts||0}</span>
            ${t.timeLimit?`<span class="chip">‚è±Ô∏è ${t.timeLimit} daq</span>`:''}
            ${t.averageScore?`<span class="chip">‚≠ê ${t.averageScore}%</span>`:''}
          </div>
          <button class="gbtn" onclick="goTo('test.html?id=${t.id}')">Boshlash ‚Üí</button>`;
        rail.appendChild(c);
      });
      outer.appendChild(rail);
      const btm=document.createElement('div');btm.className='swipe-btm';
      const dw=document.createElement('div');dw.className='dots-w';
      arr.forEach((_,i)=>{const d=document.createElement('div');d.className='d'+(i===0?' on':'');d.onclick=()=>go(i);dw.appendChild(d);});
      btm.appendChild(dw);
      let pv,nx;
      if(arr.length>1){
        const aw=document.createElement('div');aw.className='arrs';
        pv=document.createElement('button');pv.className='ar';pv.textContent='‚Äπ';pv.disabled=true;
        nx=document.createElement('button');nx.className='ar';nx.textContent='‚Ä∫';
        pv.onclick=()=>go(cur-1);nx.onclick=()=>go(cur+1);
        aw.appendChild(pv);aw.appendChild(nx);btm.appendChild(aw);
      }
      function go(i){cur=Math.max(0,Math.min(arr.length-1,i));rail.style.transform=`translateX(-${cur*100}%)`;
        dw.querySelectorAll('.d').forEach((d,j)=>d.classList.toggle('on',j===cur));
        if(pv)pv.disabled=cur===0;if(nx)nx.disabled=cur===arr.length-1;}
      let tx=0;
      rail.addEventListener('touchstart',e=>{tx=e.touches[0].clientX},{passive:true});
      rail.addEventListener('touchend',e=>{const df=tx-e.changedTouches[0].clientX;if(Math.abs(df)>40)go(df>0?cur+1:cur-1);});
      outer.appendChild(btm);grp.appendChild(outer);wrap.appendChild(grp);
    });
  }catch(e){wrap.innerHTML=`<div class="emp" style="color:#ef4444">‚ùå ${e.message}</div>`;}
})();
</script>
</body>
</html>
